<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teacher Control - VR Star Map</title>

<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<style>
body { margin:0; overflow:hidden; font-family:Arial, sans-serif; }
#controls { position:absolute; top:20px; left:50%; transform:translateX(-50%); z-index:1000; }
button { padding:10px 15px; margin:5px; font-weight:bold; }
</style>
</head>
<body>

<div id="controls">
    <button onclick="changeSeason('summer')">Summer</button>
    <button onclick="changeSeason('winter')">Winter</button>
    <button onclick="changeSeason('spring')">Spring</button>
    <button onclick="changeSeason('fall')">Fall</button>
    <button onclick="toggleConstellations()">Toggle Constellations</button>
</div>

<a-scene embedded device-orientation-permission-ui="enabled: true">
    <a-camera look-controls wasd-controls="enabled:false"></a-camera>
    <a-sky id="star-sky" src="summer_solstice.jpg"></a-sky>
</a-scene>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBUXUHdJ3oox3YSixJfoYuyRRrILe6n7ck",
  authDomain: "classroom-vrplanetarium.firebaseapp.com",
  databaseURL: "https://classroom-vrplanetarium-default-rtdb.firebaseio.com",
  projectId: "classroom-vrplanetarium",
  storageBucket: "classroom-vrplanetarium.firebasestorage.app",
  messagingSenderId: "613751774262",
  appId: "1:613751774262:web:79563f3843ef894e05cc97"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const STAR_MAPS = {
    summer: { normal: "summer_solstice.jpg", const: "summer_solstice_constellations.jpg" },
    winter: { normal: "winter_solstice.jpg", const: "winter_solstice_constellations.jpg" },
    spring: { normal: "spring_equinox.jpg", const: "spring_equinox_constellations.jpg" },
    fall: { normal: "fall_equinox.jpg", const: "fall_equinox_constellations.jpg" }
};

let currentSeason = "summer";
let constellationsVisible = false;

function updateSky() {
    const img = constellationsVisible 
        ? STAR_MAPS[currentSeason].const 
        : STAR_MAPS[currentSeason].normal;
    document.getElementById("star-sky").setAttribute("src", img);

    db.ref("classroom/currentView").set({
        season: currentSeason,
        constellations: constellationsVisible,
        timestamp: Date.now()
    });
}

function changeSeason(season) {
    currentSeason = season;
    updateSky();
}

function toggleConstellations() {
    constellationsVisible = !constellationsVisible;
    updateSky();
}

updateSky();
</script>

</body>
</html>
