<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student VR View</title>

<script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<style>
body {
    margin: 0;
    overflow: hidden;
    background: black;
    display: flex;
}
.scene-half {
    width: 50vw;
    height: 100vh;
}
</style>
</head>

<body>

<!-- LEFT EYE -->
<a-scene class="scene-half" embedded device-orientation-permission-ui="enabled: true">
    <a-camera look-controls wasd-controls="enabled: false"></a-camera>
    <a-sky id="skyLeft" src="summer_solstice.png"></a-sky>
</a-scene>

<!-- RIGHT EYE -->
<a-scene class="scene-half" embedded device-orientation-permission-ui="enabled: false">
    <a-camera look-controls wasd-controls="enabled: false"></a-camera>
    <a-sky id="skyRight" src="summer_solstice.png"></a-sky>
</a-scene>

<script>

const firebaseConfig = {
    apiKey: "YOUR_KEY",
    authDomain: "YOUR_DOMAIN",
    databaseURL: "YOUR_DB",
    projectId: "YOUR_ID",
    storageBucket: "YOUR_BUCKET",
    messagingSenderId: "YOUR_MSG_ID",
    appId: "YOUR_APP_ID"
};

const IMAGES = {
    summer: { normal: "summer_solstice.png", const: "summer_solstice_constellations.png" },
    winter: { normal: "winter_solstice.png", const: "winter_solstice_constellations.png" },
    spring: { normal: "spring_equinox.png", const: "spring_equinox_constellations.png" },
    fall: { normal: "fall_equinox.png", const: "fall_equinox_constellations.png" }
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

db.ref('classroom/currentView').on('value', snap => {
    const state = snap.val();
    if (state) {
        const img = state.constellations
            ? IMAGES[state.season].const
            : IMAGES[state.season].normal;

        document.getElementById('skyLeft').setAttribute('src', img);
        document.getElementById('skyRight').setAttribute('src', img);
    }
});

</script>

</body>
</html>
